## What I learned while studying

오늘(07/22) c언어를 공부하면서 배운 내용을 정리하였습니다.

## include와 헤더파일

헤더파일이란, C언어의 문법을 가지고 있는 프로그램입니다.  
이 파일이 코드에 추가되어 있지 않다면, 컴퓨터는 아무것도 하지 못합니다.  
왜냐하면 컴퓨터가 글자들을 알아볼 수 가 없기 때문입니다. 헤더파일을 삽입할 때는 이렇게 삽입합니다.

```c
#include <stdio.h> /*stdio.h is inputed*/
#include <stdlib.h> /*stdlib.h is inputed*/
```

이렇게 #include를 쓰고 꺽쇠(부등호) 두 개 사이에 헤더파일 이름을 쓰면 이렇게 삽입이 됩니다.  
stdio.h와 stdlib.h는 C언어의 문법을 가지고 있습니다. 이게 없으면 컴퓨터는 컴파일을 못 한다.

## pragma region

pragma region 선언부터 endregion까지 하나의 소스로 인식한다.  
하나의 소스로 인식되면 코드 옆에 -, + 아이콘으로 코드를 한번에 접을 수 있어서 유용하다.

## C언어 변환 분자

- %d : 정수 변환 문자
- %f : 실수 변환 문자
- %lf : 실수 변환 문자
  - %.2f : 소수점 2번째 자리까지 출력
- %c : 문자 변환 문자
- %s : 문자열 변환 문자

## scanf & scanf_s 함수

```c
int scanf(const char * format, … );
int scanf_s(const char * format, … );
```

scanf와 scanf_s 함수는 표준 입력(키보드)에 입력한 내용을 포맷에 맞게 얻어오는 함수이다.
그리고 scanf_s 함수는 scanf 함수의 안전한 버전의 함수이다.

scanf 함수의 반환 값은 포맷 사용자에 맞게 변환한 개수이며 포맷 사양하자는 printf에서 사용하는 것과 거의 같다.
double 형식 실수를 입력받을 때 %f 대신 %lf를 사용하는 정도가 차이점이다.

scanf 함수와 scanf_s 함수는 포맷에 맞지 않는 부분이 있으면 더 이상 작업을 진행하지 않는다.
그리고 %s 포맷은 공백이나 탭, 엔터를 만나기 전까지 문자열만 변환한다.
공백을 포함해서 문자열을 입력받을 때는 gets나 gets_s를 사용해야 한다.

그리고 scanf 함수에서는 입력한 내용을 호출한 곳의 변수에 설정하는 일을 합니다.
따라서 호출하는 곳에서는 변수의 주소를 전달해야 한다
변수의 메모리 주소를 얻을 때는 주소 연산자(&)를 사용해야 한다.

```c
#pragma warning(disable:4996) //경고 메시지를 오류 목록에 표시하지 않게 함
#include <stdio.h>
int main()
{
    int a=0, b=0, c=0, d=0;
    int re = 0;

    printf("네 개의 정수를 다음의 예처럼 입력하세요.\n");
    printf("입력 예: 255.34.198.34\n");
    re = scanf("%d.%d.%d.%d",&a,&b,&c,&d); //포맷에 맞게 입력한 부분만 변환함
    printf("입력 포맷에 맞게 전달하여 변환이 성공한 개수는 %d개 입니다.\n",re);
    printf("입력한 것을 변환한 결과: %d.%d.%d.%d \n",a,b,c,d);
    return 0;
}
```

```c
◈ 실행 결과

//네 개의 정수를 다음의 예처럼 입력하세요.
//입력 예: 255.34.198.34
//123.45.23ab45
//입력 포멧에 맞게 전달하여 변환 성공한 개수는 3개 입니다.
//입력한 것을 변환한 결과: 123.45.23.0
```

그런데 scanf 함수를 사용하면 컴파일 경고 메시지가 나온다.
포맷에 맞게 변환하여 입력 인자로 받은 주소에 값을 지정하는 과정에서 전달받은 메모리 크기를 벗어날 위험이 있다.

이러한 버퍼 오버플로우 문제를 개선한 함수가 scanf_s 함수다.
scanf_s함수는 대부분 scanf함수 사용법과 거의 같다.
차이가 있는 부분은 문자나 문자열을 입력받을 때 버퍼 길이도 전달해야 한다는 것이다.
